<div id="{{ section.id }}" class="sliding-pic-show-Zeus">
  <div class="banner">
    <h2 class="main-title">{{ section.settings.main_title | escape }}</h2>
    <div class="sub-title">
      {{ section.settings.sub_title }}
    </div>
  </div>
  <div class="sliderflow">
    {% for block in section.blocks %}
      <div class="slideitem">
        {% if block.settings.image != blank %}
          <img src="{{ block.settings.image | img_url: '800x' }}" alt="{{ block.settings.alt | escape }}">
        {% endif %}
        {% if block.settings.caption != blank %}
          <div class="slideitem-caption">{{ block.settings.caption }}</div>
        {% endif %}
      </div>
    {% endfor %}
  </div>
</div>

{% schema %}
  {
    "name": "SlidingPicShowZeus",
    "settings": [
      {
        "type": "text",
        "id": "main_title",
        "label": "Main Title"
      }, {
        "type": "textarea",
        "id": "sub_title",
        "label": "Sub Title"
      }
    ],
    "blocks": [
      {
        "type": "image_slide",
        "name": "Image_Slide",
        "settings": [
          {
            "type": "image_picker",
            "id": "image",
            "label": "Image"
          }, {
            "type": "text",
            "id": "alt",
            "label": "Alt Text"
          }, {
            "type": "text",
            "id": "caption",
            "label": "Caption"
          }
        ]
      }
    ],
    "max_blocks": 10,
    "presets": [
      {
        "name": "SlidingPicShowZeus",
        "blocks": [
          {
            "type": "image_slide"
          },
          {
            "type": "image_slide"
          },
          {
            "type": "image_slide"
          },
          {
            "type": "image_slide"
          }, {
            "type": "image_slide"
          }
        ]
      }
    ]
  }
{% endschema %}

{% stylesheet %}
  .sliding-pic-show-Zeus {
    background: #000;
    color: #fff;
    padding: 0;
    position: relative;
    overflow: hidden;
  }
  .sliding-pic-show-Zeus .banner {
    text-align: center;
    padding: 40px 20px 0;
  }
  .sliding-pic-show-Zeus .main-title {
    font-size: 2.5rem;
    font-weight: 900;
    letter-spacing: 2px;
    margin-bottom: 16px;
  }
  .sliding-pic-show-Zeus .sub-title {
    font-size: 1.15rem;
    line-height: 2;
    margin-bottom: 32px;
    font-weight: 400;
  }
  .sliding-pic-show-Zeus .sliderflow {
    display: flex;
    justify-content: flex-start;
    align-items: flex-end;
    gap: 24px;
    padding: 0 40px 40px;
    overflow: hidden;
  }
  .sliding-pic-show-Zeus .slideitem {
    flex: 0 0 auto;
    width: 400px;
    background: #222;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.45);
    overflow: hidden;
    scroll-snap-align: start;
    position: relative;
    margin: 0 -20px;
    /* 平行四邊形裁切 */
    clip-path: polygon(12% 0, 100% 0, 88% 100%, 0% 100%);
    /* 左上角和右下角圓角 */
    border-radius: 120px 0 120px 0;
  }
  .sliding-pic-show-Zeus img {
    width: 100%;
    height: 220px;
    object-fit: cover;
    display: block;
  }
  .sliding-pic-show-Zeus .slideitem-caption {
    position: absolute;
    bottom: 5px;
    left: 10px;
    right: 10px;
    background: transparent;
    color: #fff;
    padding: 10px;
    border-radius: 8px;
    font-size: 1.2rem;
    text-align: center;
  }

  @keyframes sliderflow-loop {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }
{% endstylesheet %}

<script>
  document.addEventListener('DOMContentLoaded', function() {
  const sliderflow = document.querySelector('#{{ section.id }} .sliderflow');
  if (!sliderflow) return;
  const slides = sliderflow.querySelectorAll('#{{ section.id }} .sliderflow .slideitem');
  if (slides.length === 0) return;
  
  // 取得單一 slideitem 寬度（含 gap）
  const slideStyle = getComputedStyle(slides[0]);
  const slideWidth = slides[0].offsetWidth+24-40; // +gap margin左右(-40px) 
  const totalSlides = slides.length;
  
  // 複製所有 slideitem 一次，實現無縫循環
  slides.forEach(slideitem => {
    sliderflow.appendChild(slideitem.cloneNode(true));
  });
  
  // 設定 sliderflow 寬度
  sliderflow.style.width = (slideWidth * totalSlides * 2) + 'px';
  
  // 設定動畫時間（速度可調整，數值越小越快）
  const duration = (slideWidth * totalSlides) / 100; //可調整速度，越小越快
  sliderflow.style.animation = `sliderflow-loop ${duration}s linear infinite`;
  });
</script>